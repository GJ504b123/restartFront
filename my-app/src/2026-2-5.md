[TOC]


# ğŸ“… GJ504b çš„ React è¿›é˜¶ä¹‹è·¯ï¼šDay 5
## Layout
### 1
ä¾§è¾¹æ ä»¥åŠä¾§è¾¹æ åˆ‡æ¢é€»è¾‘
```javascript
import React, { useState } from "react";
import { Layout, Menu, Button, Flex, message, Modal, Form, Input } from "antd";
import { UserOutlined, DatabaseOutlined, SearchOutlined } from "@ant-design/icons";

const { Header, Sider, Content } = Layout;

const App = () => {
  // 1. å®šä¹‰è”åŠ¨çŠ¶æ€ï¼šå½“å‰é€‰ä¸­çš„æ¨¡å—åç§°
  const [currentModule, setCurrentModule] = useState("å­—å…¸ç®¡ç†");
  // const [formVisible, setFormVisible] = useState(false);
  const [messageApi, contextHolder] = message.useMessage();

  // 2. èœå•ç‚¹å‡»å¤„ç†é€»è¾‘ (è¿™æ˜¯é€šå¾€ RBAC çš„ç¬¬ä¸€æ­¥)
  const handleMenuClick = (e) => {
    const titleMap = {
      '1': 'æ‚£è€…æ¡£æ¡ˆ',
      '2': 'å­—å…¸ç®¡ç†',
      '3': 'ç³»ç»Ÿè®¾ç½®'
    };//ç¿»è¯‘å®˜

    setCurrentModule(titleMap[e.key]); // æ ¹æ® key ä¿®æ”¹çŠ¶æ€
    messageApi.success(`åˆ‡æ¢è‡³ï¼š${titleMap[e.key]}`);
    
  };

  return (
    <Layout style={{ minHeight: "100vh" }}>
      {/* è¿™ä¸ªcontextHolderç†è®ºä¸Šæ”¾åœ¨å“ªé‡Œéƒ½å¯ä»¥ï¼Œä½†æ˜¯ä¹ æƒ¯ä¸Šæ”¾åœ¨æœ€å¤–å±‚å®¹å™¨ä¸Šæ–¹ */}
      {contextHolder}

      {/* ä¾§è¾¹æ ï¼šç³»ç»Ÿçš„æ–¹å‘ç›˜ */}
      {/* breakpoint="lg"ï¼šè¿™æ˜¯ä¸€ä¸ªâ€œè§¦å‘ç‚¹â€ã€‚å½“æµè§ˆå™¨çª—å£å®½åº¦å°äº1024pxæ—¶ï¼Œä¾§è¾¹æ ä¼šè‡ªåŠ¨æ”¶èµ·æ¥ã€‚
          collapsedWidth="0"ï¼šé…åˆæ–­ç‚¹ä½¿ç”¨ã€‚æ„æ€æ˜¯å½“å±å¹•å¤ªå°æ—¶ï¼Œä¾§è¾¹æ ç¼©çª„åˆ° 0 åƒç´ ï¼ˆå®Œå…¨éšè—ï¼‰ï¼Œè€Œä¸æ˜¯ç•™ä¸‹ä¸€ä¸ªå°çª„æ¡ã€‚*/}
      <Sider breakpoint="lg" collapsedWidth="0">
        
        {/* 1. æŒ‰é’®ä¸Šæ–¹çš„å°ä¸ªå­ï¼Œè£…é¥°ä½œç”¨ */}
        <div style={{ height: 32, margin: 16, background: 'rgba(255,255,255,.2)', borderRadius: 6 }} />

        <Menu
          theme="dark"
          mode="inline" //5. å®šä¹‰èœå•çš„å±•ç¤ºè¡Œä¸º 
          /*inline (å†…åµŒæ¨¡å¼)ï¼šä¸“é—¨ä¸ºä¾§è¾¹æ è®¾è®¡ã€‚ç‚¹å‡»çˆ¶èœå•æ—¶ï¼Œå­èœå•ä¼šåœ¨åŸä½ç½®å‘ä¸‹å±•å¼€
          vertical (å‚ç›´æ¨¡å¼)ï¼šå­èœå•ä¼šåƒâ€œæ‚¬æµ®çª—â€ä¸€æ ·å‘å³ä¾§å¼¹å‡ºã€‚
          horizontal (æ°´å¹³æ¨¡å¼)ï¼šé€šå¸¸ç”¨åœ¨é¡¶éƒ¨å¯¼èˆªæ ã€‚ */

          defaultSelectedKeys={['2']}//4. å½“ä½ çš„ç³»ç»Ÿç¬¬ä¸€æ¬¡åŠ è½½æ—¶ï¼Œä½ å¸Œæœ›å“ªä¸ªé¡µé¢æ˜¯äº®èµ·çš„ï¼Ÿåœ¨è¿™é‡Œå¡«å…¥å¯¹åº”é¡¹çš„ keyï¼Œç”¨æˆ·ä¸€è¿›æ¥å°±ä¼šçœ‹åˆ°è¿™ä¸ªé¡¹æ˜¯è“è‰²é«˜äº®çš„ã€‚
          onClick={handleMenuClick} // 2. ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç»‘å®šæ•°æ®ä¸æ¸²æŸ“çš„é€»è¾‘
          items={[
            { key: '1', icon: <UserOutlined />, label: 'æ‚£è€…æ¡£æ¡ˆ' },
            { key: '2', icon: <DatabaseOutlined />, label: 'å­—å…¸ç®¡ç†' },
            { key: '3', icon: <DatabaseOutlined />, label: 'ç³»ç»Ÿè®¾ç½®' },
          ]}//3. itemsï¼šå…·ä½“çš„æ•°æ®ï¼Œä¾¿äºç›´æ¥æ·»åŠ æ¸²æŸ“æƒ³è¦çš„æ•°æ®ï¼Œæ‰©å±•æ€§æå¼º
        />
      </Sider>


     
    </Layout>
  );
};

export default App;
```

![alt text](image-24.png)

![alt text](image-25.png)

```javascript
import React, { useState } from "react";
import { Layout, Menu, Button, Flex, message, Modal, Form, Input,Table ,Tag} from "antd";
import { UserOutlined, DatabaseOutlined, SearchOutlined } from "@ant-design/icons";

const { Header, Sider, Content } = Layout;

const App = () => {
  // 1. å®šä¹‰è”åŠ¨çŠ¶æ€ï¼šå½“å‰é€‰ä¸­çš„æ¨¡å—åç§°
  const [currentModule, setCurrentModule] = useState("æ‚£è€…æ¡£æ¡ˆ");
  const [formVisible, setFormVisible] = useState(false);
  const [messageApi, contextHolder] = message.useMessage();

  // 2. èœå•ç‚¹å‡»å¤„ç†é€»è¾‘ (è¿™æ˜¯é€šå¾€ RBAC çš„ç¬¬ä¸€æ­¥)
  const handleMenuClick = (e) => {
    const titleMap = {
      '1': 'æ‚£è€…æ¡£æ¡ˆ',
      '2': 'å­—å…¸ç®¡ç†',
      '3': 'ç³»ç»Ÿè®¾ç½®'
    };
    
    setCurrentModule(titleMap[e.key]); // æ ¹æ® key ä¿®æ”¹çŠ¶æ€
    messageApi.success(`åˆ‡æ¢è‡³ï¼š${titleMap[e.key]}`);
  };


  const data = [
    { id: '1', name: 'å¼ å°å‡¡', sex: '1', status: '0' },
    { id: '2', name: 'é™†é›ªçª', sex: '2', status: '1' },
    { id: '3', name: 'å¼ ä»¥', sex: '2', status: '2' },
  ];
// ç¿»è¯‘å®˜ï¼šè´Ÿè´£æŠŠæ•°å­—ä»£ç å˜æˆäººç±»è¯­è¨€
const genderMap = { '1': 'ç”·', '2': 'å¥³' };
// const statusMap = { '0': 'å¾…å°±è¯Š', '1': 'é—®è¯Šä¸­', '2': 'å·²å®Œæˆ' };//ï¼ï¼ ç›´æ¥è§£æ„ï¼ŒæŠŠæˆ‘ä»¬çš„é¢œè‰²æ”¾åœ¨statusMapé‡Œé¢
const statusMap = { '0': {text:'å¾…å°±è¯Š',color:'orange'}, '1': {text:'é—®è¯Šä¸­',color:'blue'}, '2': {text:'å·²å®Œæˆ',color:'green'} };
  const columns =[
    {
      title:'å§“å',
      dataIndex:'name',
      key:'name',
      // å»ºè®® key ä¸ dataIndex ä¿æŒä¸€è‡´ï¼ˆå¦‚ key: 'name', key: 'sex'ï¼‰
    },
    {
      title:'æ€§åˆ«',
      dataIndex:'sex',
      key:'sex',
      render:(text ) =>genderMap[text] 
      //amazing!!! å°ç¿»è¯‘å®˜å¾ˆæœ‰ç”¨ï¼Œå°±æ˜¯è¦å†™åœ¨renderé‡Œ

    },
    {
      title:'çŠ¶æ€',
      dataIndex:'status',
      key:'status',
      // render:(text) =><Tag style={
      //   text ==='0'?{color:'orange'}:text === '1'?{color:'blue'}:{color:'green'}
      // }>{statusMap[text]}</Tag>//ï¼ï¼ ç›´æ¥è§£æ„ï¼ŒæŠŠæˆ‘ä»¬çš„é¢œè‰²æ”¾åœ¨statusMapé‡Œé¢
       
      // }>{statusMap[text]}</Tag>
      render:(text) =>{
        const config = statusMap[text] ||{text:'æœªçŸ¥',color:'default'}
        // return<Tag style={{color:config.color}}>{config.text}</Tag>//Tagé‡Œè‡ªå¸¦çš„colorå±æ€§
        return<Tag color={config.color}>{config.text}</Tag>

      }
    },
  ]

  return (
    <Layout style={{ minHeight: "100vh" }}>
      {contextHolder}

      {/* ä¾§è¾¹æ ï¼šç³»ç»Ÿçš„æ–¹å‘ç›˜ */}
      <Sider breakpoint="lg" collapsedWidth="0">
        <div style={{ height: 32, margin: 16, background: 'rgba(255,255,255,.2)', borderRadius: 6 }} />
        <Menu
          theme="dark"
          mode="inline"
          defaultSelectedKeys={['1']}
          onClick={handleMenuClick} // ç»‘å®šç‚¹å‡»äº‹ä»¶
          items={[
            { key: '1', icon: <UserOutlined />, label: 'æ‚£è€…æ¡£æ¡ˆ' },
            { key: '2', icon: <DatabaseOutlined />, label: 'å­—å…¸ç®¡ç†' },
            { key: '3', icon: <DatabaseOutlined />, label: 'ç³»ç»Ÿè®¾ç½®' },
          ]}
        />
      </Sider>


      <Layout>
        {/* é¡¶éƒ¨ï¼šå±•ç¤ºå½“å‰ä½ç½® */}
        <Header style={{ background: "#fff", paddingLeft: 24, borderBottom: '1px solid #f0f0f0' }}>
          <h2 style={{ margin: 0 }}>åŒ»ç‚¹å°±é€š - {currentModule}</h2> 
        </Header>

        {/* å†…å®¹åŒºï¼šå±•ç¤ºå…·ä½“ä¸šåŠ¡ */}
        <Content style={{ margin: "24px 16px", padding: 24, background: "#fff", borderRadius: 8 }}>
          {/* æ ¹æ®ä¸åŒçš„æ¨¡å—å±•ç¤ºä¸åŒçš„å†…å®¹ï¼ˆç®€å•çš„æ¡ä»¶æ¸²æŸ“ï¼‰ */}
          {currentModule === "æ‚£è€…æ¡£æ¡ˆ" ? (
            <Flex vertical gap="middle">
              <Button type="primary" onClick={() => setFormVisible(true)}>
                æ·»åŠ æ–°æ‚£è€…
              </Button>
              <div style={{ padding: 50, border: '1px dashed #ccc', textAlign: 'center' }}>
                <Table columns={columns} dataSource={data} rowKey="id"></Table>
              </div>
            </Flex>
          ) : (
            <div style={{ padding: 50, textAlign: 'center' }}>
              <h3>æ­£åœ¨åŠ è½½å­—å…¸ç®¡ç†æ¨¡å—...</h3>
              <p>æˆ‘ä»¬å°†åœ¨è¿™é‡Œå®ç°â€œ1=ç”·, 2=å¥³â€çš„é€»è¾‘æ˜ å°„</p>
            </div>
          )}
        </Content>
      </Layout>

      {/* ä¿æŒå¹¶åˆ—ç»“æ„çš„ Modal */}
      <Modal open={formVisible} footer={null} onCancel={() => setFormVisible(false)}>
        <h2>æ‚£è€…ä¿¡æ¯ç™»è®°</h2>
        <Form layout="vertical" onFinish={(val) => {
          message.success(`å½•å…¥æˆåŠŸï¼š${val.username}`);
          setFormVisible(false);
        }}>
          <Form.Item label="å§“å" name="username" rules={[{ required: true }]}>
            <Input />
          </Form.Item>
          <Button type="primary" htmlType="submit" block>æäº¤</Button>
        </Form>
      </Modal>
    </Layout>
  );
};

export default App;
```
